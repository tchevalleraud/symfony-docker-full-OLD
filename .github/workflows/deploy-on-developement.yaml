name: Deploy on development server
on:
    push:
        branches: [master, develop]
jobs:
    init:
        runs-on: [development]
        steps:
            - name: Copy file on server
              uses: actions/checkout@v2
              with:
                  path: ./dev/
            - name: Update environment
              run: |
                  cd ./dev/
                  rm .env
                  touch .env
                  echo "APP_ENV=dev" >> .env
    build:
        runs-on: [development]
        needs: [init]
        steps:
            - name: Build docker image
              run: |
                  cd ./dev/
    deploy:
        runs-on: [development]
        needs: [build]
        steps:
            - name: Start docker environment
              run: |
                  cd ./dev/
    tests:
        runs-on: [development]
        needs: [deploy]
        steps:
            - name: UnitTest
              run: |
                  cd ./dev/